description = "H2O Selenium"

dependencies {
	apply plugin:'java'
	compile project(':h2o-core')
    compile project(':h2o-algos')
    testCompile project(path: ':h2o-core', configuration: 'testArchives')
    testCompile project(path: ':h2o-algos', configuration: 'testArchives') 
   }
   
task run_java(type:Exec){
		commandLine 'java', '-jar', '../build/h2o.jar' 
	}
   
task run_selenium(type: Exec){  
		if(!rootProject.hasProperty('algorithm')){
			println("algorithm parameter is required. Please imput it")
			commandLine 'echo', "algorithm parameter is required. Please imput it"
		}
		else if(!rootProject.hasProperty('phantomjsPath')){
			println("phantomjsPath parameter is required. Please imput it")
			commandLine 'echo', "phantomjsPath parameter is required. Please imput it"
		}
		else{
			def testcaseFile = "$algorithm" + "Cases"
			commandLine 'python', 'run.py', '-t', "$testcaseFile", '-l', "$phantomjsPath"
		}
	} 

task selenium()<<{ 
	def startH2OServer = Thread.start { 
		run_java.execute() 
    }	
	sleep 10000 
	println "Run java -jar h20: finished" 
	run_selenium.execute()
} 


