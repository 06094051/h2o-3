<?xml version="1.0" encoding="UTF-8"?>
<!-- For some reason the Jacoco plugin for gradle doesn't include a task to instrument files even though it is
     included in the ANT plugin. This file gives gradle that instrument task. -->

<project name="jacocoInstrument" xmlns:jacoco="antlib:org.jacoco.ant">

    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
        <classpath path="jacocoant.jar"/>
    </taskdef>

    <target name="instrument">
        <jacoco:instrument destdir="../build/jacoco_instrumented">
	  <fileset dir="../" includes="**/build/libs/**/*.jar" excludes="build/**"/>
	  <fileset dir="../" includes="build/h2o.jar"/>
        </jacoco:instrument>
    </target>
    
</project>
